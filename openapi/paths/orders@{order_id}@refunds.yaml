post:
  description: | 
    Process a [full or partial refund](https://docs.multisafepay.com/docs/refund-payments/) for an order.

    Refunding creates a new order linked to the original order. By default, it has the same `order_id` as the original order. To override this, include in the request `refund_order_id`.
  operationId: refundOrder
  security: [ApiKeyQuery: []]
  parameters:
    - name: order_id
      description: | 
        The unique identifier of the order. 

        To refund a Pay After Delivery partial shipment: 

        - Before shipment: Refund the whole order using the **invoice order** `order_id`.
        - After shipment: Refund specific partial shipments using the **shipment** `order_id` returned in the [Partially ship order](https://docs.multisafepay.com/reference/updateorder) response.
      
        Max length: 50 characters.
      in: path
      required: true
      schema:
        type: string
  requestBody:
    content:
      application/json:
        schema:
          oneOf:
            - $import: '../components/requestBody/Refund.yaml'
            - $import: '../components/requestBody/RefundBNPL.yaml'
        examples: 
          Refund: 
            summary: Refund
            value:  
              $import: '../components/examples/requests/refunds/refund.json'
          BNPL refund:
            summary: BNPL refund
            value:  
              $import: '../components/examples/requests/refunds/refundBNPL.json'
  responses:
    '200':
      description: Request successful
      content:
        application/json:
          schema:
            oneOf:
              - $import: '../components/responseBody/refundOrder.yaml'
              - $import: '../components/responseBody/refundPartialShipment.yaml'
          examples:
            refundOrder:
              summary: Refund (BNPL) order
              value:
                $import: '../components/examples/responses/refundOrder.json'
            refundPartialShipment:
              summary: Refund partial shipment
              value: 
                $import: '../components/examples/responses/refundPartialShipment.json'
    '404':
      description: Error
      content:
        application/json:
          schema:
            $import: '../components/errors/404Error.yaml'
  summary: Refund order
  tags:
    - Refunds
